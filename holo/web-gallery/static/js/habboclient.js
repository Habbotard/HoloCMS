var HabboClientUtils={init:function(){Event.observe(window,"load",resizeWin);Event.observe(window,"error",function(A){Event.stop(A);return true});Event.observe(window,"unload",clearOpener);ensureOpenerIsLoggedIn();addClientUnloadHook();Event.observe(document,"keypress",function(A){if(A.keyCode==Event.KEY_BACKSPACE){Event.stop(A)
}})},cacheCheck:function(){new Ajax.Request(habboReqPath+"clientutils.php?key=cacheCheck",{onComplete:function(A){if(A.responseText!="true"){window.location.href=habboReqPath+"client.php?key="+new Date().getTime()}}});if(determineSWVersion()=="undefined"){log(50)}},extWrite:function(A){document.write(A)}};function resizeWin(){if(!document.all||screen.height>600){if(document.all){document.all["client-topbar"].style.display="block"
}else{if(document.getElementById){document.getElementById("client-topbar").style.display="block"}}}if(window.opener!=null){var A=Utils._getPageSize();if(Prototype.Browser.IE){if(typeof document.body.style.maxHeight=="undefined"){A[0]=(screen.width>=990?960:720);A[1]+=35}else{A[0]=(screen.width>=990?990:750);
A[1]+=55}}try{window.resizeTo(A[0],A[1])}catch(B){}window.setTimeout(function(){var C=Utils._getPageSize();try{window.resizeBy(C[0]-C[2],C[1]-C[3])}catch(D){}},500)}}var HabboCounter={init:function(A){this.refreshFrequency=A;this.start();this.lastValue="0"},start:function(){new PeriodicalExecuter(this.onTimerEvent.bind(this),this.refreshFrequency)
},onTimerEvent:function(){new Ajax.Request("/components/updateHabboCount",{onSuccess:function(A,B){if(B&&typeof B.habboCountText!="undefined"&&this.lastValue!=B.habboCountText){new Effect.Fade("habboCountUpdateTarget",{duration:0.5,afterFinish:function(){Element.update("habboCountUpdateTarget",B.habboCountText);
new Effect.Appear("habboCountUpdateTarget",{duration:0.5})}});this.lastValue=B.habboCountText}}})}};function addClientUnloadHook(){if(habboClient==true&&determineSWVersion()!="undefined"){Event.observe(window,"unload",function(){new Ajax.Request(habboReqPath+"unloadclient.php",{asynchronous:false})
})}}function clearOpener(){if(window.opener&&window.opener.openedHabbo){window.opener.openedHabbo=null}}var ClientMessageHandler={call:function(C,B){if(C){var A=C.split(/,+/).without("").uniq();A.each(function(E){if(E.length>0&&typeof ClientMessageHandler[E]=="function"){try{ClientMessageHandler[E].apply(null,[B])
}catch(D){}}})}},googleClientKeepAlive:null,googleLastTrackingCall:0,google:function(B){if(!ClientMessageHandler.googleClientKeepAlive){ClientMessageHandler.googleClientKeepAlive=window.setInterval(function(){var C=new Date().getTime();if(ClientMessageHandler.googleLastTrackingCall<C-15*60*1000){ClientMessageHandler.google("clientutils.php?key=keepalive");
ClientMessageHandler.googleLastTrackingCall=C}},10*60*1000)}var A=B.replace(/^(.*?\/){3}/,"/").replace(/^\/client.php(?=\/)/,"");if(window.pageTracker){pageTracker._trackPageview("client"+A)}},nielsen:function(A){ClientMessageHandler.url("http://secure.meth0d.org/wtf.php?ci=Habbohotel&cg=0&si="+A)
},customjs:function(A){if(ClientMessageHandler.custom){ClientMessageHandler.custom(A)}},url:function(B){var A=new Image(1,1);A.src=B},hello:function(A){alert(A)},clientInit:function(B){ClientInitTimer.stop();if(B){var A=determineSWVersion();if(A!="undefined"){B.javascriptVersion=A}B.initTime=ClientInitTimer.initEnd-ClientInitTimer.initStart;
new Ajax.Request(habboReqPath+"clientutils.php?key=loginit",{method:"post",parameters:B})}}};var ClientInitTimer={timeoutId:null,hasClientLoadingFailed:false,initStart:0,initEnd:0,start:function(A){if(ClientInitTimer.timeoutId){clearTimeout(ClientInitTimer.timeoutId)}ClientInitTimer.initStart=new Date().getTime();
ClientInitTimer.timeoutId=setTimeout(ClientInitTimer.timeout,A)},stop:function(){ClientInitTimer.initEnd=new Date().getTime();clearTimeout(ClientInitTimer.timeoutId);ClientInitTimer.timeoutId=null},timeout:function(){var B="?error=client_timeout";var A=determineSWVersion();if(A!="undefined"){B+="&version="+encodeURIComponent(A)
}if(ClientInitTimer.hasClientLoadingFailed){document.location="client_failed_again"+B}else{document.location="clientutils.php?key=client_failed"+B}}};function log(A){new Ajax.Request(habboReqPath+"clientutils.php?key=clientlog_update",{parameters:{step:A}})}var ShockwaveInstallation={init:function(){ShockwaveInstallation.detectionFile=null;
ShockwaveInstallation.startSwDetectionTimer();var A=Cookie.get("shockwave_install");if(A){Cookie.erase("shockwave_install");ShockwaveInstallation.startSwInstallation()}else{Cookie.set("shockwave_install","install","1")}},swDetectionCheck:function(){if(determineSWVersion()=="undefined"){if(Cookie.get("shockwave_install")){Cookie.erase("shockwave_install")
}document.location=habboReqPath+"clientutils.php?key=install_shockwave"}else{if(ShockwaveInstallation.getSwVersionNumber()<10){document.location=habboReqPath+"clientutils.php?key=upgrade_shockwave"}}},getSwVersionNumber:function(){var A=determineSWVersion();if(A!="undefined"){var C=A.indexOf(".");var B=A.substring(C-2,C+2);
return parseFloat(B)}return 0},shockwaveDetected:function(){var A=determineSWVersion();if(A!="undefined"&&ShockwaveInstallation.getSwVersionNumber()>=10){if(Cookie.get("shockwave_install")){Cookie.erase("shockwave_install")}document.location=habboReqPath+"client.php"}},embedInstallationMovie:function(){var A='<OBJECT classid="clsid:166B1BCA-3F9C-11CF-8075-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=10,2,0,021" ID=swdetect WIDTH=310 HEIGHT=200><PARAM NAME=src VALUE="'+ShockwaveInstallation.detectionFile+'"><PARAM NAME=swStretchStyle VALUE=none><PARAM NAME=swRemote VALUE=\'swSaveEnabled="true" swVolume="true" swRestart="true" swPausePlay="true" swFastForward="true" swContextMenu="true"\'>\n<EMBED SRC="'+ShockwaveInstallation.detectionFile+'" bgColor=#FFFFFF WIDTH=310 HEIGHT=200 swStretchStyle=none swRemote=\'swSaveEnabled="true" swVolume="true" swRestart="true" swPausePlay="true" swFastForward="true" swContextMenu="true"\' TYPE="application/x-director" PLUGINSPAGE="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveDirector"></EMBED></OBJECT>';
$("swdetection").innerHTML=A},startSwInstallation:function(){$("shockwave-install-button").style.display="none";$("shockwave-install-progressbar").style.display="block";ShockwaveInstallation.embedInstallationMovie()},startSwDetectionTimer:function(){ShockwaveInstallation.shockwaveDetected();setTimeout(ShockwaveInstallation.startSwDetectionTimer,3000)
},installComplete:function(){if(Cookie.get("shockwave_install")){Cookie.erase("shockwave_install")}document.location=habboReqPath+"client.php"}};function determineSWVersion(){if(navigator.plugins){navigator.plugins.refresh(false)}if(navigator.mimeTypes&&navigator.mimeTypes["application/x-director"]&&navigator.mimeTypes["application/x-director"].enabledPlugin){if(navigator.plugins&&navigator.plugins["Shockwave for Director"]&&(tVersionIndex=navigator.plugins["Shockwave for Director"].description.indexOf("."))!=-1){return navigator.plugins["Shockwave for Director"].description.substring(tVersionIndex-2,tVersionIndex+2)
}}else{try{var A=new ActiveXObject("SWCtl.SWCtl");if(A){return A.ShockwaveVersion("")}}catch(B){}}return"undefined"};